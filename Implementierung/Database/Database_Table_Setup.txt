CREATE TABLE Server (
   ip varchar(50) NOT NULL,
   name varchar(255) NOT NULL,
   PRIMARY KEY (ip)
);

CREATE TABLE WorkflowTemplate (
   template_ID INTEGER,
   name varchar(255),
   dag varchar(255),
   PRIMARY KEY (template_ID)
);

CREATE TABLE Workflow (
   name varchar(255),
   dag varchar(255),
   PRIMARY KEY (name)
);

CREATE TABLE FolderFile (
   wfName varchar(255),
   file_ID INTEGER,
   file varchar(255),
   PRIMARY KEY (wfname, file_ID),
   FOREIGN KEY (wfname) REFERENCES Workflow(name)
);

CREATE TABLE Version (
   ID INTEGER,
   wfName varchar(255) NOT NULL,
   version varchar(127) NOT NULL,
   note varchar(1000),
   PRIMARY KEY (ID, wfName, version),
   FOREIGN KEY (wfName) REFERENCES Workflow(name)
);

CREATE TABLE ActiveVersion (
   versionID INTEGER,
   PRIMARY KEY (versionID),
   FOREIGN KEY (versionID) REFERENCES Version(ID)
);

CREATE TABLE ConfFile (
   confKey INTEGER NOT NULL,
   file varchar(255) NOT NULL,
   PRIMARY KEY (confKey)
);

CREATE TABLE VersionFile (
   versionID INTEGER,
   filename varchar(255),
   confKey INTEGER NOT NULL,
   PRIMARY KEY (versionID, filename),
   FOREIGN KEY (versionID) REFERENCES Version(ID),
   FOREIGN KEY (confKey) REFERENCES ConfFile(confKey)
);

CREATE TABLE ResultFile (
   versionID INTEGER,
   filesID INTEGER NOT NULL,
   file varchar(255),
   PRIMARY KEY (versionID, filesID),
   FOREIGN KEY (versionID) REFERENCES Version(ID)
);